#!/usr/bin/env sh

echo "ğŸ” Running Expo project checks before push..."

# Type checking (fail on errors)
echo "ğŸ“ Type checking..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type checking failed!"
  exit 1
fi

# Linting (allow warnings, fail on errors only)
echo "ğŸ” Linting..."
npm run lint -- --max-warnings=20
if [ $? -ne 0 ]; then
  echo "âŒ Linting failed with errors!"
  exit 1
fi

# Format checking
echo "ğŸ¨ Format checking..."
npm run format:check
if [ $? -ne 0 ]; then
  echo "âŒ Format checking failed!"
  exit 1
fi

# Expo doctor (allow some failures)
echo "ğŸ“± Validating Expo config..."
npx expo doctor || echo "âš ï¸  Expo doctor warnings detected but continuing..."

echo "âœ… Pre-push checks completed!"
